<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cervical Spine (Neck) Stem Cell Therapy Cost Guide in Boston, Massachusetts | StemCellPrices.com</title>
    <meta name="description" content="Cervical Spine (Neck) stem cell therapy costs $$5,300 to $$21,200 in Boston, Massachusetts. Compare prices from verified clinics.">
    <link rel="canonical" href="https://stemcellprices.com/neck-cost-guide/massachusetts/boston/">

    <!-- Google Fonts: Manrope -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Condition Data -->
    <script src="/condition-data.js"></script>
    <!-- Geo Detection -->
    <script src="/geo-detect.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Manrope', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f0f7ff',
                            100: '#e0effe',
                            200: '#bae0fd',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        price: {
                            light: '#0ea5e9',
                            dark: '#0369a1',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        [x-cloak] { display: none !important; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .gradient-bg {
            background: radial-gradient(circle at top right, #e0effe 0%, #f8fafc 40%, #ffffff 100%);
        }

        .price-gradient-bar {
            background: linear-gradient(to right, #bae0fd, #2563eb, #1e3a8a);
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>

    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "MedicalWebPage",
        "name": "Cervical Spine (Neck) Stem Cell Therapy Cost Guide in Boston, Massachusetts",
        "description": "Cervical Spine (Neck) stem cell therapy costs $$5,300 to $$21,200 in Boston, Massachusetts. Compare prices from verified clinics.",
        "url": "https://stemcellprices.com/neck-cost-guide/massachusetts/boston/",
        "mainEntity": {
            "@type": "MedicalProcedure",
            "name": "Cervical Spine (Neck) Stem Cell Therapy",
            "procedureType": "Regenerative Medicine"
        }
    }
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B61C6SRXP7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-B61C6SRXP7', {
            'condition': 'neck',
            'page_type': 'cost_guide',
            'location_state': 'Massachusetts',
            'location_city': 'Boston'
        });
    </script>
</head>
<body class="font-sans antialiased text-slate-900 gradient-bg min-h-screen flex flex-col" x-data="costGuideApp()">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <a href="/" class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-brand-600 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                    </div>
                    <span class="text-xl font-bold tracking-tight text-slate-900">StemCellPrices.com<span class="text-brand-600">.</span></span>
                </a>
                <div class="hidden md:flex space-x-8 text-sm font-semibold text-slate-600">
                    <a href="/national_cost_index.html" class="hover:text-brand-600 transition border-b-2 border-transparent">Cost Guide</a>
                    <a href="#" class="text-brand-600 border-b-2 border-brand-600">Conditions</a>
                    <a href="/locations/" class="hover:text-brand-600 transition border-b-2 border-transparent">Locations</a>
                    <a href="/locations/" class="hover:text-brand-600 transition border-b-2 border-transparent">Find Clinics</a>
                </div>
                <div class="flex items-center gap-4">
                    <a href="/admin/" class="text-sm font-bold text-brand-700 bg-brand-50 px-4 py-2 rounded-full hover:bg-brand-100 transition">Clinic Login</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow">

        <!-- Breadcrumb & Header -->
        <section class="pt-8 pb-12">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <nav class="flex mb-4 text-xs font-bold uppercase tracking-wider text-slate-400 gap-2 items-center flex-wrap">
                    <a href="/" class="hover:text-brand-600">Home</a>
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"></path></svg>
                    <a href="/national_cost_index.html" class="hover:text-brand-600">Cost Index</a>
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"></path></svg>
                    <span class="text-brand-600" x-text="condition.name">Cervical Spine (Neck)</span>
                    <template x-if="location.city">
                        <span class="flex items-center gap-2">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"></path></svg>
                            <span x-text="location.city + ', ' + location.stateCode"></span>
                        </span>
                    </template>
                </nav>

                <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 tracking-tight mb-4">
                    <span x-text="condition.shortName">Neck</span> Stem Cell Therapy <span class="text-brand-600">Cost Guide</span>
                </h1>

                <!-- Location indicator with change option -->
                <div class="flex items-center gap-3 mb-4" x-show="location.city">
                    <div class="flex items-center gap-2 text-sm text-slate-500">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        <span>Showing prices for <strong x-text="location.city + ', ' + location.state"></strong></span>
                    </div>
                    <button @click="showLocationModal = true" class="text-sm text-brand-600 hover:text-brand-700 font-semibold underline">Change</button>
                </div>

                <p class="text-lg text-slate-600 max-w-3xl leading-relaxed" x-text="condition.description">
                    Cervical Spine (Neck) stem cell therapy costs $$5,300 to $$21,200 in Boston, Massachusetts. Compare prices from verified clinics.
                </p>
            </div>
        </section>

        <!-- National Price Range Cards -->
        <section class="pb-16">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-2xl p-6 border border-slate-200 shadow-sm text-center">
                        <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2" x-text="location.city ? location.city + ' Low' : 'National Low'">National Low</div>
                        <div class="text-3xl font-extrabold text-slate-700" x-text="formatPrice(prices.low)">$$5,300</div>
                    </div>
                    <div class="bg-brand-600 rounded-2xl p-6 text-center shadow-lg">
                        <div class="text-[10px] font-bold text-brand-200 uppercase tracking-widest mb-2">Median Price</div>
                        <div class="text-4xl font-extrabold text-white" x-text="formatPrice(prices.median)">$$9,400</div>
                    </div>
                    <div class="bg-white rounded-2xl p-6 border border-slate-200 shadow-sm text-center">
                        <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2" x-text="location.city ? location.city + ' High' : 'National High'">National High</div>
                        <div class="text-3xl font-extrabold text-slate-700" x-text="formatPrice(prices.high)">$$21,200</div>
                    </div>
                </div>

                <!-- Clinical Outcomes Card -->
                <div class="bg-slate-50 rounded-2xl p-8 border border-slate-200">
                    <h3 class="font-bold text-slate-900 mb-6">Clinical Outcomes (<span x-text="condition.outcomes.source">Spine Journal 2024, Cervical Spine Research Society</span>)</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <div>
                            <div class="text-[10px] font-bold text-rose-500 uppercase tracking-widest mb-1">Success Rate</div>
                            <div class="text-2xl font-extrabold text-slate-900" x-text="condition.outcomes.successRate">58-68%</div>
                        </div>
                        <div>
                            <div class="text-[10px] font-bold text-amber-500 uppercase tracking-widest mb-1">Pain Reduction</div>
                            <div class="text-2xl font-extrabold text-slate-900" x-text="condition.outcomes.painReduction">2.3 pts</div>
                            <div class="text-[10px] text-slate-400" x-text="'(' + condition.outcomes.painScale + ')'">(0-10 scale)</div>
                        </div>
                        <div>
                            <div class="text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-1">Function Improvement</div>
                            <div class="text-2xl font-extrabold text-slate-900" x-text="condition.outcomes.functionImprovement">15.2 pts</div>
                            <div class="text-[10px] text-slate-400" x-text="'(' + condition.outcomes.functionScale + ')'">(NDI score)</div>
                        </div>
                        <div>
                            <div class="text-[10px] font-bold text-brand-500 uppercase tracking-widest mb-1">Duration</div>
                            <div class="text-2xl font-extrabold text-slate-900" x-text="condition.outcomes.duration">10-16</div>
                            <div class="text-[10px] text-slate-400" x-text="condition.outcomes.durationUnit">months</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Early CTA Section -->
        <section class="py-8">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="bg-gradient-to-r from-brand-600 to-brand-700 rounded-2xl p-8 text-center shadow-xl">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                        <div class="text-left">
                            <h3 class="text-2xl font-bold text-white mb-2">Ready to Explore Your Options?</h3>
                            <p class="text-brand-100">Get a free consultation with a verified stem cell specialist <span x-show="location.city" x-text="'in ' + location.city"></span></p>
                        </div>
                        <a href="https://stemcellprices.com/consultation"
                           class="inline-flex items-center gap-2 px-8 py-4 bg-white text-brand-700 rounded-xl font-bold hover:bg-brand-50 transition shadow-lg whitespace-nowrap">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            Get Free Consultation
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Price Breakdown by Treatment Type -->
        <section class="py-12 bg-white">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-2xl font-extrabold text-slate-900 mb-8">Price Breakdown by Treatment Type</h2>
                <div class="border border-slate-200 rounded-2xl overflow-hidden">
                    <div class="divide-y divide-slate-100">
                        <template x-for="treatment in condition.treatments" :key="treatment.name">
                            <div class="p-6 flex justify-between items-center hover:bg-slate-50 transition">
                                <div>
                                    <h4 class="font-bold text-slate-900" x-text="treatment.name"></h4>
                                    <p class="text-xs text-slate-400" x-text="'Source: ' + treatment.source"></p>
                                </div>
                                <span class="text-lg font-bold text-brand-600" x-text="treatment.priceRange"></span>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="py-12 bg-slate-50">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-2xl font-extrabold text-slate-900 mb-8">Frequently Asked Questions</h2>
                <div class="space-y-4">
                    <template x-for="(faq, index) in condition.faqs" :key="index">
                        <div class="bg-white rounded-xl p-6 border border-slate-200">
                            <h3 class="font-bold text-slate-900 mb-2" x-text="faq.question"></h3>
                            <p class="text-slate-600 text-sm leading-relaxed" x-text="faq.answer"></p>
                        </div>
                    </template>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="py-12 bg-slate-900">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center text-white">
                    <h2 class="text-3xl font-extrabold mb-4">Find <span x-text="condition.shortName">Neck</span> Stem Cell Clinics <span x-show="location.city" x-text="'in ' + location.city">in Boston</span></h2>
                    <p class="text-slate-400 mb-8">Compare prices and credentials from 250+ verified providers</p>
                    <a :href="location.city ? '/locations/' + location.stateSlug + '/' + location.citySlug + '/' : '/locations/'" class="inline-block px-10 py-4 bg-brand-600 hover:bg-brand-700 text-white rounded-2xl font-bold transition">
                        Browse Clinics
                    </a>
                </div>
            </div>
        </section>

        <!-- Other Conditions -->
        <section class="py-12 bg-white">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-xl font-bold text-slate-900 mb-6">Other Condition Cost Guides</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                    <template x-for="(cond, key) in otherConditions" :key="key">
                        <a :href="'/' + cond.slug + '/'"
                           class="block p-4 bg-slate-50 hover:bg-slate-100 rounded-xl text-center transition"
                           :class="{ 'ring-2 ring-brand-600 bg-brand-50': key === conditionKey }">
                            <div class="text-sm font-semibold text-slate-700" x-text="cond.shortName"></div>
                        </a>
                    </template>
                </div>
            </div>
        </section>

    </main>

    <!-- Location Change Modal -->
    <div x-show="showLocationModal" x-cloak class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" @click.self="showLocationModal = false">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h3 class="text-xl font-bold text-slate-900 mb-4">Change Your Location</h3>
            <p class="text-slate-600 text-sm mb-6">Select a city to see local pricing and clinics.</p>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Select City</label>
                    <select x-model="selectedCity" class="w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500">
                        <option value="">-- Select a city --</option>
                        <template x-for="(city, slug) in CITY_PRICES" :key="slug">
                            <option :value="slug" x-text="city.name + ', ' + city.state"></option>
                        </template>
                    </select>
                </div>

                <div class="flex gap-3">
                    <button @click="showLocationModal = false" class="flex-1 px-4 py-3 border border-slate-300 rounded-xl font-semibold text-slate-700 hover:bg-slate-50 transition">
                        Cancel
                    </button>
                    <button @click="changeLocation()" class="flex-1 px-4 py-3 bg-brand-600 rounded-xl font-semibold text-white hover:bg-brand-700 transition">
                        Update Location
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Footer / Disclosures -->
    <footer class="bg-white border-t border-slate-200 pt-16 pb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
                <div class="md:col-span-1">
                    <a href="/" class="flex items-center gap-2 mb-6">
                        <div class="w-8 h-8 bg-slate-900 rounded-lg flex items-center justify-center text-white">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                        </div>
                        <span class="text-xl font-bold tracking-tight text-slate-900">StemCellPrices.com</span>
                    </a>
                    <p class="text-slate-500 text-sm leading-relaxed">
                        The web's most trusted database for regenerative orthopedic therapy pricing and clinic comparison.
                    </p>
                </div>
                <div>
                    <h5 class="font-bold text-slate-900 mb-4 text-sm uppercase tracking-widest">Treatment Costs</h5>
                    <ul class="space-y-2 text-sm text-slate-500">
                        <li><a href="/knee-cost-guide/" class="hover:text-brand-600">Knee Stem Cell Cost</a></li>
                        <li><a href="/spine-cost-guide/" class="hover:text-brand-600">Back & Spine Cost</a></li>
                        <li><a href="/shoulder-cost-guide/" class="hover:text-brand-600">Shoulder Injection Cost</a></li>
                        <li><a href="/hip-cost-guide/" class="hover:text-brand-600">Hip Osteoarthritis Cost</a></li>
                        <li><a href="/neck-cost-guide/" class="hover:text-brand-600">Neck/Cervical Cost</a></li>
                        <li><a href="/si-joint-cost-guide/" class="hover:text-brand-600">SI Joint Cost</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="font-bold text-slate-900 mb-4 text-sm uppercase tracking-widest">Top Locations</h5>
                    <ul class="space-y-2 text-sm text-slate-500">
                        <li><a href="/locations/" class="hover:text-brand-600">All 30 States</a></li>
                        <li><a href="/locations/california/los-angeles/" class="hover:text-brand-600">Clinics in Los Angeles</a></li>
                        <li><a href="/locations/california/" class="hover:text-brand-600">Clinics in California</a></li>
                        <li><a href="/locations/texas/" class="hover:text-brand-600">Clinics in Texas</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="font-bold text-slate-900 mb-4 text-sm uppercase tracking-widest">Legal</h5>
                    <ul class="space-y-2 text-sm text-slate-500">
                        <li><a href="#" class="hover:text-brand-600">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-brand-600">Terms of Service</a></li>
                        <li><a href="#" class="hover:text-brand-600">Clinic Verification</a></li>
                    </ul>
                </div>
            </div>

            <!-- Mandatory Compliance Footer -->
            <div class="p-6 bg-slate-50 rounded-2xl border border-slate-100 mb-8">
                <div class="flex items-start gap-4 text-[11px] text-slate-400 leading-relaxed uppercase tracking-wider">
                    <svg class="w-10 h-10 text-slate-300 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                    <div>
                        <p class="mb-2"><strong>Disclaimer:</strong> StemCellPrices.com is an information directory only. We do not provide medical advice, diagnosis, or treatment recommendations. All costs are estimated based on clinic reports and historical data. Stem cell therapies for orthopedic use vary in FDA status; always consult with a licensed physician regarding the regulatory status and safety of any procedure.</p>
                        <p>No outcomes are guaranteed. Price ranges do not include airfare, lodging, or ancillary testing unless specified.</p>
                    </div>
                </div>
            </div>

            <div class="flex flex-col md:flex-row justify-between items-center gap-4 text-slate-400 text-xs border-t border-slate-100 pt-8">
                <p>&copy; 2026 StemCellPrices.com Inc. All rights reserved.</p>
                <div class="flex gap-6">
                    <a href="#" class="hover:text-slate-600">Twitter</a>
                    <a href="#" class="hover:text-slate-600">LinkedIn</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function costGuideApp() {
            return {
                // Page configuration (set by template or URL)
                conditionKey: 'neck',
                initialCity: 'boston',
                initialState: 'massachusetts',

                // State
                condition: {},
                location: {
                    city: null,
                    state: null,
                    stateCode: null,
                    citySlug: null,
                    stateSlug: null
                },
                prices: {
                    low: 0,
                    median: 0,
                    high: 0
                },
                showLocationModal: false,
                selectedCity: '',
                otherConditions: {},

                async init() {
                    // Load condition data
                    this.condition = CONDITIONS[this.conditionKey] || CONDITIONS['knee'];

                    // Set other conditions for navigation
                    this.otherConditions = CONDITIONS;

                    // Set base prices
                    this.prices = {
                        low: this.condition.priceRange.low,
                        median: this.condition.priceRange.median,
                        high: this.condition.priceRange.high
                    };

                    // Determine location
                    if (this.initialCity && CITY_PRICES[this.initialCity]) {
                        // Location from URL
                        this.setLocation(this.initialCity);
                    } else {
                        // Try geo-detection
                        await this.detectLocation();
                    }
                },

                async detectLocation() {
                    try {
                        const geo = await detectUserLocation();
                        if (geo && geo.city) {
                            // Find matching city in our data
                            const citySlug = this.findCitySlug(geo.city, geo.state);
                            if (citySlug) {
                                this.setLocation(citySlug);
                            }
                        }
                    } catch (e) {
                        console.log('Geo-detection not available, using national prices');
                    }
                },

                findCitySlug(cityName, stateName) {
                    for (const [slug, city] of Object.entries(CITY_PRICES)) {
                        if (city.name.toLowerCase() === cityName.toLowerCase() ||
                            slug === cityName.toLowerCase().replace(/\s+/g, '-')) {
                            return slug;
                        }
                    }
                    return null;
                },

                setLocation(citySlug) {
                    const city = CITY_PRICES[citySlug];
                    if (!city) return;

                    this.location = {
                        city: city.name,
                        state: city.state,
                        stateCode: city.state.substring(0, 2).toUpperCase(),
                        citySlug: citySlug,
                        stateSlug: city.stateSlug
                    };

                    // Adjust prices for this city
                    const modifier = city.priceModifier;
                    this.prices = {
                        low: Math.round(this.condition.priceRange.low * modifier / 100) * 100,
                        median: Math.round(this.condition.priceRange.median * modifier / 100) * 100,
                        high: Math.round(this.condition.priceRange.high * modifier / 100) * 100
                    };

                    // Save to localStorage
                    localStorage.setItem('userLocation', JSON.stringify({
                        citySlug: citySlug,
                        city: city.name,
                        state: city.state
                    }));
                },

                changeLocation() {
                    if (this.selectedCity) {
                        this.setLocation(this.selectedCity);
                        this.showLocationModal = false;

                        // Update URL to reflect new location
                        const newUrl = '/' + this.condition.slug + '/' +
                                       CITY_PRICES[this.selectedCity].stateSlug + '/' +
                                       this.selectedCity + '/';
                        window.history.pushState({}, '', newUrl);
                    }
                },

                formatPrice(amount) {
                    return '$' + amount.toLocaleString('en-US');
                }
            }
        }
    </script>
</body>
</html>
